<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ES6 常用语法 | lzx博客</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="哈哈哈哈哈哈哈">
    
    <link rel="preload" href="/assets/css/0.styles.b4c82722.css" as="style"><link rel="preload" href="/assets/js/app.0e804dd0.js" as="script"><link rel="preload" href="/assets/js/2.88d3d6de.js" as="script"><link rel="preload" href="/assets/js/10.2a262f59.js" as="script"><link rel="prefetch" href="/assets/js/11.9c33b3b6.js"><link rel="prefetch" href="/assets/js/12.857578e2.js"><link rel="prefetch" href="/assets/js/13.d1be6f81.js"><link rel="prefetch" href="/assets/js/14.0248f4c6.js"><link rel="prefetch" href="/assets/js/15.c7ea8c99.js"><link rel="prefetch" href="/assets/js/16.b0c85d7e.js"><link rel="prefetch" href="/assets/js/17.108ae549.js"><link rel="prefetch" href="/assets/js/18.7df07c8c.js"><link rel="prefetch" href="/assets/js/19.14190d34.js"><link rel="prefetch" href="/assets/js/20.93d9b199.js"><link rel="prefetch" href="/assets/js/3.99d822cf.js"><link rel="prefetch" href="/assets/js/4.dfc5e940.js"><link rel="prefetch" href="/assets/js/5.fcb3dae5.js"><link rel="prefetch" href="/assets/js/6.f066a273.js"><link rel="prefetch" href="/assets/js/7.56dd53d2.js"><link rel="prefetch" href="/assets/js/8.3b10e0f8.js"><link rel="prefetch" href="/assets/js/9.171c0ef7.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b4c82722.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">lzx博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/posts/uniapp.html" class="nav-link">
  我的博客
</a></div><div class="nav-item"><a href="/components/左右拉动组件.html" class="nav-link">
  我的组件
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow down"></span></button> <button type="button" aria-label="GitHub" class="mobile-dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/hndd99cla" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub地址
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/posts/uniapp.html" class="nav-link">
  我的博客
</a></div><div class="nav-item"><a href="/components/左右拉动组件.html" class="nav-link">
  我的组件
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow down"></span></button> <button type="button" aria-label="GitHub" class="mobile-dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/hndd99cla" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub地址
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>uniapp</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>css</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>js</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/posts/ES6 常用语法.html" class="active sidebar-link">ES6 常用语法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/posts/ES6 常用语法.html#什么是es6" class="sidebar-link">什么是ES6</a></li><li class="sidebar-sub-header"><a href="/posts/ES6 常用语法.html#_1-解构赋值" class="sidebar-link">1.解构赋值</a></li><li class="sidebar-sub-header"><a href="/posts/ES6 常用语法.html#_2-map和set" class="sidebar-link">2.Map和Set</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/posts/ES6 常用语法.html#map-对象" class="sidebar-link">Map 对象</a></li><li class="sidebar-sub-header"><a href="/posts/ES6 常用语法.html#set-对象" class="sidebar-link">Set 对象</a></li></ul></li><li class="sidebar-sub-header"><a href="/posts/ES6 常用语法.html#_3-字符串、对象、数组和函数" class="sidebar-link">3.字符串、对象、数组和函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/posts/ES6 常用语法.html#字符串-2" class="sidebar-link">字符串</a></li><li class="sidebar-sub-header"><a href="/posts/ES6 常用语法.html#对象" class="sidebar-link">对象</a></li><li class="sidebar-sub-header"><a href="/posts/ES6 常用语法.html#数组" class="sidebar-link">数组</a></li><li class="sidebar-sub-header"><a href="/posts/ES6 常用语法.html#函数" class="sidebar-link">函数</a></li></ul></li><li class="sidebar-sub-header"><a href="/posts/ES6 常用语法.html#_4-reflect与proxy" class="sidebar-link">4.Reflect与Proxy</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/posts/ES6 常用语法.html#proxy" class="sidebar-link">Proxy</a></li><li class="sidebar-sub-header"><a href="/posts/ES6 常用语法.html#reflect" class="sidebar-link">Reflect</a></li><li class="sidebar-sub-header"><a href="/posts/ES6 常用语法.html#组合使用" class="sidebar-link">组合使用</a></li></ul></li><li class="sidebar-sub-header"><a href="/posts/ES6 常用语法.html#_5-promise" class="sidebar-link">5.Promise</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/posts/ES6 常用语法.html#promise-状态" class="sidebar-link">Promise 状态</a></li><li class="sidebar-sub-header"><a href="/posts/ES6 常用语法.html#then-方法" class="sidebar-link">then 方法</a></li><li class="sidebar-sub-header"><a href="/posts/ES6 常用语法.html#promise封装axios" class="sidebar-link">Promise封装axios</a></li><li class="sidebar-sub-header"><a href="/posts/ES6 常用语法.html#promise-prototype-catch方法-捕捉错误" class="sidebar-link">Promise.prototype.catch方法：捕捉错误</a></li><li class="sidebar-sub-header"><a href="/posts/ES6 常用语法.html#promise-all方法-promise-race方法" class="sidebar-link">Promise.all方法，Promise.race方法</a></li></ul></li><li class="sidebar-sub-header"><a href="/posts/ES6 常用语法.html#_6-generator函数和async函数" class="sidebar-link">6.Generator函数和async函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/posts/ES6 常用语法.html#generator-函数组成" class="sidebar-link">Generator 函数组成</a></li><li class="sidebar-sub-header"><a href="/posts/ES6 常用语法.html#执行机制" class="sidebar-link">执行机制</a></li><li class="sidebar-sub-header"><a href="/posts/ES6 常用语法.html#async函数" class="sidebar-link">async函数</a></li></ul></li></ul></li><li><a href="/posts/121501.html" class="sidebar-link">Vue组件的通信总结</a></li><li><a href="/posts/判断url图片是否404.html" class="sidebar-link">判断url图片是否404</a></li><li><a href="/posts/ajax返回blob封装.html" class="sidebar-link">ajax返回blob封装</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>node</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="es6-常用语法"><a href="#es6-常用语法" class="header-anchor">#</a> ES6 常用语法</h1> <hr> <h2 id="什么是es6"><a href="#什么是es6" class="header-anchor">#</a> 什么是ES6</h2> <p>ES6，全称ECMAScript6.0是 JavaScript 的下一个版本标准2015.06发版。
ES6主要是为了解决 ES5 的先天不足，比如 JavaScript 里并没有类的概念，但是目前浏览器的 JavaScript 是 ES5版本，大多数高版本的浏览器也支持 ES6，不过只实现了 ES6 的部分特性和功能。
本次主要介绍一些常用的ES6语法。如下</p> <blockquote><ul><li>ES6 解构赋值</li> <li>ES6 Map和Set</li> <li>ES6 字符串、对象、数组和函数</li> <li>ES6 Reflect与Proxy</li> <li>ES6 Promise对象</li> <li>ES6 Generator函数和async函数</li></ul></blockquote> <hr> <p>[TOC]</p> <h2 id="_1-解构赋值"><a href="#_1-解构赋值" class="header-anchor">#</a> 1.解构赋值</h2> <p>解构赋值是对赋值运算符的扩展。
他是一种针对数组或者对象进行模式匹配，然后对其中的变量进行赋值。
在代码书写上简洁且易读，语义更加清晰明了；也方便了复杂对象中数据字段获取。</p> <blockquote><h4 id="数组模型的解构"><a href="#数组模型的解构" class="header-anchor">#</a> 数组模型的解构</h4></blockquote> <h5 id="基本"><a href="#基本" class="header-anchor">#</a> <strong>基本</strong></h5> <div class="language-python line-numbers-mode"><pre class="language-python"><code>let <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token operator">//</span> a <span class="token operator">=</span> <span class="token number">1</span>
<span class="token operator">//</span> b <span class="token operator">=</span> <span class="token number">2</span>
<span class="token operator">//</span> c <span class="token operator">=</span> <span class="token number">3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h5 id="可嵌套"><a href="#可嵌套" class="header-anchor">#</a> <strong>可嵌套</strong></h5> <div class="language-python line-numbers-mode"><pre class="language-python"><code>let <span class="token punctuation">[</span>a<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token punctuation">,</span> c<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token operator">//</span> a <span class="token operator">=</span> <span class="token number">1</span>
<span class="token operator">//</span> b <span class="token operator">=</span> <span class="token number">2</span>
<span class="token operator">//</span> c <span class="token operator">=</span> <span class="token number">3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h5 id="可忽略"><a href="#可忽略" class="header-anchor">#</a> <strong>可忽略</strong></h5> <div class="language-python line-numbers-mode"><pre class="language-python"><code>let <span class="token punctuation">[</span>a<span class="token punctuation">,</span> <span class="token punctuation">,</span> b<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token operator">//</span> a <span class="token operator">=</span> <span class="token number">1</span>
<span class="token operator">//</span> b <span class="token operator">=</span> <span class="token number">3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="剩余运算符"><a href="#剩余运算符" class="header-anchor">#</a> <strong>剩余运算符</strong></h5> <div class="language-python line-numbers-mode"><pre class="language-python"><code>let <span class="token punctuation">[</span>a<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>b<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token operator">//</span>a <span class="token operator">=</span> <span class="token number">1</span>
<span class="token operator">//</span>b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="字符串"><a href="#字符串" class="header-anchor">#</a> <strong>字符串</strong></h5> <div class="language-python line-numbers-mode"><pre class="language-python"><code>let <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">,</span> e<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'hello'</span><span class="token punctuation">;</span>
<span class="token operator">//</span> a <span class="token operator">=</span> <span class="token string">'h'</span>
<span class="token operator">//</span> b <span class="token operator">=</span> <span class="token string">'e'</span>
<span class="token operator">//</span> c <span class="token operator">=</span> <span class="token string">'l'</span>
<span class="token operator">//</span> d <span class="token operator">=</span> <span class="token string">'l'</span>
<span class="token operator">//</span> e <span class="token operator">=</span> <span class="token string">'o'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h5 id="解构默认值"><a href="#解构默认值" class="header-anchor">#</a> <strong>解构默认值</strong></h5> <div class="language-python line-numbers-mode"><pre class="language-python"><code>let <span class="token punctuation">[</span>a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>undefined<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token operator">//</span> a <span class="token operator">=</span> <span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>当解构模式有匹配结果，且匹配结果是 undefined 时，会触发默认值作为返回结果。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>let <span class="token punctuation">[</span>a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> b <span class="token operator">=</span> a<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>     <span class="token operator">//</span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">3</span>
let <span class="token punctuation">[</span>a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> b <span class="token operator">=</span> a<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token operator">//</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">1</span>
let <span class="token punctuation">[</span>a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> b <span class="token operator">=</span> a<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token operator">//</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><hr> <blockquote><h4 id="对象模型的解构"><a href="#对象模型的解构" class="header-anchor">#</a> 对象模型的解构</h4></blockquote> <h5 id="基本-2"><a href="#基本-2" class="header-anchor">#</a> <strong>基本</strong></h5> <div class="language-python line-numbers-mode"><pre class="language-python"><code>let <span class="token punctuation">{</span> foo<span class="token punctuation">,</span> bar <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token punctuation">:</span> <span class="token string">'aaa'</span><span class="token punctuation">,</span> bar<span class="token punctuation">:</span> <span class="token string">'bbb'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">//</span> foo <span class="token operator">=</span> <span class="token string">'aaa'</span>
<span class="token operator">//</span> bar <span class="token operator">=</span> <span class="token string">'bbb'</span>
 
let <span class="token punctuation">{</span> baz <span class="token punctuation">:</span> foo <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> baz <span class="token punctuation">:</span> <span class="token string">'ddd'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">//</span> foo <span class="token operator">=</span> <span class="token string">'ddd'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h5 id="可嵌套可忽略"><a href="#可嵌套可忽略" class="header-anchor">#</a> <strong>可嵌套可忽略</strong></h5> <div class="language-python line-numbers-mode"><pre class="language-python"><code>let obj <span class="token operator">=</span> <span class="token punctuation">{</span>p<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>y<span class="token punctuation">:</span> <span class="token string">'world'</span><span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
let <span class="token punctuation">{</span>p<span class="token punctuation">:</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> <span class="token punctuation">{</span> y <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span>
<span class="token operator">//</span> x <span class="token operator">=</span> <span class="token string">'hello'</span>
<span class="token operator">//</span> y <span class="token operator">=</span> <span class="token string">'world'</span>

let obj <span class="token operator">=</span> <span class="token punctuation">{</span>p<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>y<span class="token punctuation">:</span> <span class="token string">'world'</span><span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
let <span class="token punctuation">{</span>p<span class="token punctuation">:</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> <span class="token punctuation">{</span>  <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span>
<span class="token operator">//</span> x <span class="token operator">=</span> <span class="token string">'hello'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h5 id="剩余运算符-2"><a href="#剩余运算符-2" class="header-anchor">#</a> <strong>剩余运算符</strong></h5> <div class="language-python line-numbers-mode"><pre class="language-python"><code>let <span class="token punctuation">{</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>rest<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span> c<span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">,</span> d<span class="token punctuation">:</span> <span class="token number">40</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">//</span> a <span class="token operator">=</span> <span class="token number">10</span>
<span class="token operator">//</span> b <span class="token operator">=</span> <span class="token number">20</span>
<span class="token operator">//</span> rest <span class="token operator">=</span> <span class="token punctuation">{</span>c<span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">,</span> d<span class="token punctuation">:</span> <span class="token number">40</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_2-map和set"><a href="#_2-map和set" class="header-anchor">#</a> 2.Map和Set</h2> <h3 id="map-对象"><a href="#map-对象" class="header-anchor">#</a> <strong>Map 对象</strong></h3> <p>Map 对象保存键值对。任何值(对象或者原始值) 都可以作为一个键或一个值。</p> <p><strong>Maps 和 Objects 的区别</strong></p> <ul><li>一个 Object 的键只能是字符串或者 Symbols，但一个 Map 的键可以是任意值。</li> <li>Map 中的键值是有序的（FIFO 原则），而添加到对象中的键则不是</li> <li>Map 的键值对个数可以从 size 属性获取，而 Object 的键值对个数只能手动计算。</li> <li>Object 都有自己的原型，原型链上的键名有可能和你自己在对象上的设置的键名产生冲突。</li></ul> <p><strong>Map中的key可以是字符串、对象和函数</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>var myMap <span class="token operator">=</span> new Map<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
var keyString <span class="token operator">=</span> <span class="token string">&quot;a string&quot;</span><span class="token punctuation">;</span> 
var keyString <span class="token operator">=</span> <span class="token string">&quot;a string&quot;</span><span class="token punctuation">;</span> 
var keyFunc <span class="token operator">=</span> function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

myMap<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>keyString<span class="token punctuation">,</span> <span class="token string">&quot;和键'a string'关联的值&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myMap<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>keyObj<span class="token punctuation">,</span> <span class="token string">&quot;和键 keyObj 关联的值&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myMap<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>keyFunc<span class="token punctuation">,</span> <span class="token string">&quot;和键 keyFunc 关联的值&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="map的迭代"><a href="#map的迭代" class="header-anchor">#</a> <strong>Map的迭代</strong></h4> <h5 id="for-of"><a href="#for-of" class="header-anchor">#</a> <strong>for...of</strong></h5> <div class="language-python line-numbers-mode"><pre class="language-python"><code>var myMap <span class="token operator">=</span> new Map<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myMap<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;zero&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myMap<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;one&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token operator">//</span> 将会显示两个 log。 一个是 <span class="token string">&quot;0 = zero&quot;</span> 另一个是 <span class="token string">&quot;1 = one&quot;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>var <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> of myMap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span>log<span class="token punctuation">(</span>key <span class="token operator">+</span> <span class="token string">&quot; = &quot;</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>var <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> of myMap<span class="token punctuation">.</span>entries<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span>log<span class="token punctuation">(</span>key <span class="token operator">+</span> <span class="token string">&quot; = &quot;</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">*</span> 这个 entries 方法返回一个新的 Iterator 对象，它按插入顺序包含了 Map 对象中每个元素的 <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> 数组。 <span class="token operator">*</span><span class="token operator">/</span>
 
<span class="token operator">//</span> 将会显示两个log。 一个是 <span class="token string">&quot;0&quot;</span> 另一个是 <span class="token string">&quot;1&quot;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>var key of myMap<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span>log<span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">*</span> 这个 keys 方法返回一个新的 Iterator 对象， 它按插入顺序包含了 Map 对象中每个元素的键。 <span class="token operator">*</span><span class="token operator">/</span>
 
<span class="token operator">//</span> 将会显示两个log。 一个是 <span class="token string">&quot;zero&quot;</span> 另一个是 <span class="token string">&quot;one&quot;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>var value of myMap<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span>log<span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">*</span> 这个 values 方法返回一个新的 Iterator 对象，它按插入顺序包含了 Map 对象中每个元素的值。 <span class="token operator">*</span><span class="token operator">/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h4 id="map对象的操作"><a href="#map对象的操作" class="header-anchor">#</a> <strong>Map对象的操作</strong></h4> <p></p> <h5 id="map-与-array的转换"><a href="#map-与-array的转换" class="header-anchor">#</a> <strong>Map 与 Array的转换</strong></h5> <div class="language-python line-numbers-mode"><pre class="language-python"><code>var kvArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;key1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;value1&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;key2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;value2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 
<span class="token operator">//</span> Map 构造函数可以将一个 二维 键值对数组转换成一个 Map 对象
var myMap <span class="token operator">=</span> new Map<span class="token punctuation">(</span>kvArray<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token operator">//</span> 使用 Array<span class="token punctuation">.</span><span class="token keyword">from</span> 函数可以将一个 Map 对象转换成一个二维键值对数组
var outArray <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span>myMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h5 id="map-的克隆"><a href="#map-的克隆" class="header-anchor">#</a> <strong>Map 的克隆</strong></h5> <div class="language-python line-numbers-mode"><pre class="language-python"><code>var myMap1 <span class="token operator">=</span> new Map<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;key1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;value1&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;key2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;value2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
var myMap2 <span class="token operator">=</span> new Map<span class="token punctuation">(</span>myMap1<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
console<span class="token punctuation">.</span>log<span class="token punctuation">(</span>original <span class="token operator">==</span><span class="token operator">=</span> clone<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token operator">//</span> 打印 false。 Map 对象构造函数生成实例，迭代出新的对象。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="map-的合并"><a href="#map-的合并" class="header-anchor">#</a> <strong>Map 的合并</strong></h5> <div class="language-python line-numbers-mode"><pre class="language-python"><code>var first <span class="token operator">=</span> new Map<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'one'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'three'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
var second <span class="token operator">=</span> new Map<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'uno'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'dos'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token operator">//</span> 合并两个 Map 对象时，如果有重复的键值，则后面的会覆盖前面的，对应值即 uno，dos， three
var merged <span class="token operator">=</span> new Map<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>first<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>second<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="set-对象"><a href="#set-对象" class="header-anchor">#</a> <strong>Set 对象</strong></h3> <p>Set 对象允许你存储任何类型的唯一值，无论是原始值或者是对象引用。</p> <p><strong>Set 中的特殊值</strong></p> <p>Set 对象存储的值总是唯一的，所以需要判断两个值是否恒等。有几个特殊值需要特殊对待：</p> <ul><li>+0 与 -0 在存储判断唯一性的时候是恒等的，所以不重复；</li> <li>undefined 与 undefined 是恒等的，所以不重复；</li> <li>NaN 与 NaN 是不恒等的，但是在 Set 中只能存一个，不重复。</li></ul> <p></p> <h4 id="不可重复性"><a href="#不可重复性" class="header-anchor">#</a> <strong>不可重复性</strong></h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code>let mySet <span class="token operator">=</span> new Set<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
mySet<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">//</span> Set<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span>
mySet<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">//</span> Set<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>
mySet<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">//</span> Set<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span> 这里体现了值的唯一性
mySet<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token string">&quot;some text&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token operator">//</span> Set<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;some text&quot;</span><span class="token punctuation">}</span> 这里体现了类型的多样性
var o <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span> 
mySet<span class="token punctuation">.</span>add<span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
mySet<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token punctuation">{</span>a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token operator">//</span> Set<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;some text&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>…<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>…<span class="token punctuation">}</span><span class="token punctuation">}</span> 
<span class="token operator">//</span> 这里体现了对象之间引用不同不恒等，即使值相同，Set 也能存储
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="类型转换"><a href="#类型转换" class="header-anchor">#</a> <strong>类型转换</strong></h4> <h5 id="array"><a href="#array" class="header-anchor">#</a> <strong>Array</strong></h5> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">//</span> Array 转 Set
var mySet <span class="token operator">=</span> new Set<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;value1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;value2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;value3&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">//</span> 用<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>操作符，将 Set 转 Array
var myArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>mySet<span class="token punctuation">]</span><span class="token punctuation">;</span>
String
<span class="token operator">//</span> String 转 Set
var mySet <span class="token operator">=</span> new Set<span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token operator">//</span> Set<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token string">&quot;h&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;e&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;l&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;o&quot;</span><span class="token punctuation">}</span>
<span class="token operator">//</span> 注：Set 中 toString 方法是不能将 Set 转换成 String
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="set对象一些用法"><a href="#set对象一些用法" class="header-anchor">#</a> <strong>Set对象一些用法</strong></h4> <h5 id="数组去重"><a href="#数组去重" class="header-anchor">#</a> <strong>数组去重</strong></h5> <div class="language-python line-numbers-mode"><pre class="language-python"><code>var mySet <span class="token operator">=</span> new Set<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>mySet<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token operator">//</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h5 id="并集"><a href="#并集" class="header-anchor">#</a> <strong>并集</strong></h5> <div class="language-python line-numbers-mode"><pre class="language-python"><code>var a <span class="token operator">=</span> new Set<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
var b <span class="token operator">=</span> new Set<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
var union <span class="token operator">=</span> new Set<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>a<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>b<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">//</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="交集"><a href="#交集" class="header-anchor">#</a> <strong>交集</strong></h5> <div class="language-python line-numbers-mode"><pre class="language-python"><code>var a <span class="token operator">=</span> new Set<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
var b <span class="token operator">=</span> new Set<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
var intersect <span class="token operator">=</span> new Set<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>a<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>x <span class="token operator">=</span><span class="token operator">&gt;</span> b<span class="token punctuation">.</span>has<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">//</span> <span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="差集"><a href="#差集" class="header-anchor">#</a> <strong>差集</strong></h5> <div class="language-python line-numbers-mode"><pre class="language-python"><code>var a <span class="token operator">=</span> new Set<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
var b <span class="token operator">=</span> new Set<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
var difference <span class="token operator">=</span> new Set<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>a<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>x <span class="token operator">=</span><span class="token operator">&gt;</span> !b<span class="token punctuation">.</span>has<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">//</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_3-字符串、对象、数组和函数"><a href="#_3-字符串、对象、数组和函数" class="header-anchor">#</a> 3.字符串、对象、数组和函数</h2> <h3 id="字符串-2"><a href="#字符串-2" class="header-anchor">#</a> <strong>字符串</strong></h3> <h4 id="字符串补全"><a href="#字符串补全" class="header-anchor">#</a> <strong>字符串补全</strong></h4> <ul><li>padStart：返回新的字符串，表示用参数字符串从头部（左侧）补全原字符串。</li> <li>padEnd：返回新的字符串，表示用参数字符串从尾部（右侧）补全原字符串。</li></ul> <p> 
以上两个方法接受两个参数，第一个参数是指定生成的字符串的最小长度，第二个参数是用来补全的字符串。如果没有指定第二个参数，默认用空格填充。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>console<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token string">&quot;h&quot;</span><span class="token punctuation">.</span>padStart<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">&quot;o&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token operator">//</span> <span class="token string">&quot;ooooh&quot;</span>
console<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token string">&quot;h&quot;</span><span class="token punctuation">.</span>padEnd<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">&quot;o&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">//</span> <span class="token string">&quot;hoooo&quot;</span>
console<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token string">&quot;h&quot;</span><span class="token punctuation">.</span>padStart<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token operator">//</span> <span class="token string">&quot;    h&quot;</span>

<span class="token operator">//</span>如果指定的长度小于或者等于原字符串的长度，则返回原字符串<span class="token punctuation">:</span>
console<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">.</span>padStart<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token operator">//</span> <span class="token string">&quot;hello&quot;</span>

<span class="token operator">//</span>如果原字符串加上补全字符串长度大于指定长度，则截去超出位数的补全字符串<span class="token punctuation">:</span>
console<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">.</span>padEnd<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">&quot;,world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token operator">//</span> <span class="token string">&quot;hello,worl&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="模板字符串"><a href="#模板字符串" class="header-anchor">#</a> <strong>模板字符串</strong></h4> <p>模板字符串相当于加强版的字符串，用反引号`,除了作为普通字符串，还可以用来定义多行字符串，还可以在字符串中加入变量和表达式。</p> <h5 id="基本用法"><a href="#基本用法" class="header-anchor">#</a> <strong>基本用法</strong></h5> <div class="language-python line-numbers-mode"><pre class="language-python"><code>let string <span class="token operator">=</span> `Hello<span class="token string">'\n'</span>world`<span class="token punctuation">;</span>
console<span class="token punctuation">.</span>log<span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token operator">//</span> &quot;Hello'
<span class="token operator">//</span> 'world&quot;

<span class="token operator">//</span> 换行用法 模板字符串会保留空格和换行
let string1 <span class="token operator">=</span>  `Hey<span class="token punctuation">,</span>
can you stop angry now?`<span class="token punctuation">;</span>
console<span class="token punctuation">.</span>log<span class="token punctuation">(</span>string1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">//</span> Hey<span class="token punctuation">,</span>
<span class="token operator">//</span> can you stop angry now?

<span class="token operator">//</span> 字符串插入变量和表达式
let name <span class="token operator">=</span> <span class="token string">&quot;Tom&quot;</span><span class="token punctuation">;</span>
let age <span class="token operator">=</span> <span class="token number">27</span><span class="token punctuation">;</span>
let info <span class="token operator">=</span> `My Name <span class="token keyword">is</span> $<span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">,</span>I am $<span class="token punctuation">{</span>age<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">}</span> years old <span class="token builtin">next</span> year<span class="token punctuation">.</span>`
console<span class="token punctuation">.</span>log<span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">//</span> My Name <span class="token keyword">is</span> Tom<span class="token punctuation">,</span>I am <span class="token number">28</span> years old <span class="token builtin">next</span> year<span class="token punctuation">.</span>

<span class="token operator">//</span>插入函数
function f<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&quot;have fun!&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
let string2<span class="token operator">=</span> `Game start<span class="token punctuation">,</span>$<span class="token punctuation">{</span>f<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>`<span class="token punctuation">;</span>
console<span class="token punctuation">.</span>log<span class="token punctuation">(</span>string2<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token operator">//</span> Game start<span class="token punctuation">,</span>have fun!
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h5 id="标签用法"><a href="#标签用法" class="header-anchor">#</a> <strong>标签用法</strong></h5> <p>标签模板，是一个函数的调用，其中调用的参数是模板字符串。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>alert`Hello world!`<span class="token punctuation">;</span>
<span class="token operator">//</span> 等价于
alert<span class="token punctuation">(</span><span class="token string">'Hello world!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

getPersonInfo<span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">)</span>
getPersonInfo`$<span class="token punctuation">{</span>person<span class="token punctuation">}</span> <span class="token keyword">is</span> $<span class="token punctuation">{</span>age<span class="token punctuation">}</span> years old` 
<span class="token operator">//</span>三个参数为 <span class="token punctuation">[</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;is&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;years old&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> person<span class="token punctuation">,</span> age
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="对象"><a href="#对象" class="header-anchor">#</a> <strong>对象</strong></h3> <h4 id="属性的简洁表示法"><a href="#属性的简洁表示法" class="header-anchor">#</a> <strong>属性的简洁表示法</strong></h4> <p>这个在我们vue项目中模块导出或者注册组件经常用到</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>export default<span class="token punctuation">{</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    specifyAreaSelect
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

export default <span class="token punctuation">{</span>
    actions<span class="token punctuation">,</span>
    state
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="属性名表达式"><a href="#属性名表达式" class="header-anchor">#</a> <strong>属性名表达式</strong></h4> <p>ES6允许用表达式作为属性名，但是一定要将表达式放在方括号内。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>const obj <span class="token operator">=</span> <span class="token punctuation">{</span>
 <span class="token punctuation">[</span><span class="token string">&quot;he&quot;</span><span class="token operator">+</span><span class="token string">&quot;llo&quot;</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token string">&quot;Hi&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
obj<span class="token punctuation">.</span>hello<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token operator">//</span><span class="token string">&quot;Hi&quot;</span>
<span class="token operator">//</span>注意点：属性的简洁表示法和属性名表达式不能同时使用，否则会报错。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="对象的拓展运算符"><a href="#对象的拓展运算符" class="header-anchor">#</a> <strong>对象的拓展运算符</strong></h4> <p>拓展运算符（...）用于取出参数对象所有可遍历属性然后拷贝到当前对象。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>//基本
let person = {name: &quot;Amy&quot;, age: 15};
let someone = { ...person };
someone;  //{name: &quot;Amy&quot;, age: 15}

//合并对象
let age = {age: 15};
let name = {name: &quot;Amy&quot;};
let person = {...age, ...name};
person;  //{age: 15, name: &quot;Amy&quot;}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="对象新方法"><a href="#对象新方法" class="header-anchor">#</a> <strong>对象新方法</strong></h4> <p>Object.assign() 用于将源对象的所有可枚举属性复制到目标对象中。</p> <h5 id="基本-3"><a href="#基本-3" class="header-anchor">#</a> <strong>基本</strong></h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>let target = {a: 1};
let object2 = {b: 2};
let object3 = {c: 3};
Object.assign(target,object2,object3);  
// 第一个参数是目标对象，后面的参数是源对象
target;  // {a: 1, b: 2, c: 3}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h5 id="注意点"><a href="#注意点" class="header-anchor">#</a> <strong>注意点</strong></h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>//assign 的属性拷贝是浅拷贝:
let sourceObj = { a: { b: 1}};
let targetObj = {c: 3};
Object.assign(targetObj, sourceObj);
targetObj.a.b = 2;
sourceObj.a.b;  // 2

//同名属性替换
targetObj = { a: { b: 1, c:2}};
sourceObj = { a: { b: &quot;hh&quot;}};
Object.assign(targetObj, sourceObj);
targetObj;  // {a: {b: &quot;hh&quot;}}

//数组的处理
Object.assign([2,3], [5]);  // [5,3]
//会将数组处理成对象，所以先将 [2,3] 转为 {0:2,1:3} ，然后再进行属性复制，所以源对象的 0 号属性覆盖了目标对象的 0。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="数组"><a href="#数组" class="header-anchor">#</a> <strong>数组</strong></h3> <h4 id="数组的创建"><a href="#数组的创建" class="header-anchor">#</a> <strong>数组的创建</strong></h4> <h5 id="array-from"><a href="#array-from" class="header-anchor">#</a> <strong>Array.from()</strong></h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>console.log(Array.from([1, 2])); // [1, 2]
//可迭代
console.log(Array.from([1, 2, 3], (n) =&gt; n * 2)); // [2, 4, 6]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="类数组对象"><a href="#类数组对象" class="header-anchor">#</a> <strong>类数组对象</strong></h4> <p>一个类数组对象必须含有 length 属性，且元素属性名必须是数值或者可转换为数值的字符。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>let arr = Array.from({
  0: '1',
  1: '2',
  2: 3,
  length: 3
});
console.log(); // ['1', '2', 3]
 
// 没有 length 属性,则返回空数组
let array = Array.from({
  0: '1',
  1: '2',
  2: 3,
});
console.log(array); // []
 
// 元素属性名不为数值且无法转换为数值，返回长度为 length 元素值为 undefined 的数组  
let array1 = Array.from({
  a: 1,
  b: 2,
  length: 2
});
console.log(array1); // [undefined, undefined]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h4 id="扩展的方法"><a href="#扩展的方法" class="header-anchor">#</a> <strong>扩展的方法</strong></h4> <h5 id="find"><a href="#find" class="header-anchor">#</a> <strong>find()</strong></h5> <p>查找数组中符合条件的元素,若有多个符合条件的元素，则返回第一个元素。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>let arr = Array.of(1, 2, 3, 4);
console.log(arr.find(item =&gt; item &gt; 2)); // 3
 
// 数组空位处理为 undefined
console.log([, 1].find(n =&gt; true)); // undefined
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="fill"><a href="#fill" class="header-anchor">#</a> <strong>fill()</strong></h5> <p>将一定范围索引的数组元素内容填充为单个指定的值</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>let arr = Array.of(1, 2, 3, 4);
// 参数1：用来填充的值
// 参数2：被填充的起始索引
// 参数3(可选)：被填充的结束索引，默认为数组末尾
console.log(arr.fill(0,1,2)); // [1, 0, 3, 4]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="flat"><a href="#flat" class="header-anchor">#</a> <strong>flat()</strong></h5> <p>展开数组</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>console.log([1 ,[2, 3]].flat()); // [1, 2, 3]
 
// 指定转换的嵌套层数
console.log([1, [2, [3, [4, 5]]]].flat(2)); // [1, 2, 3, [4, 5]]
 
// 不管嵌套多少层
console.log([1, [2, [3, [4, 5]]]].flat(Infinity)); // [1, 2, 3, 4, 5]
 
// 自动跳过空位
console.log([1, [2, , 3]].flat());&lt;p&gt; // [1, 2, 3]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="扩展运算符"><a href="#扩展运算符" class="header-anchor">#</a> <strong>扩展运算符</strong></h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>let arr = [1, 2],
    arr1 = [...arr];
console.log(arr1); // [1, 2]

console.log([...[1, 2],...[3, 4]]); // [1, 2, 3, 4]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="函数"><a href="#函数" class="header-anchor">#</a> <strong>函数</strong></h3> <h4 id="默认传参"><a href="#默认传参" class="header-anchor">#</a> <strong>默认传参</strong></h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>function fn(name,age=17){
 console.log(name+&quot;,&quot;+age);
}
fn(&quot;Amy&quot;,18);  // Amy,18
fn(&quot;Amy&quot;,&quot;&quot;);  // Amy,
fn(&quot;Amy&quot;);     // Amy,17
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="不定参数"><a href="#不定参数" class="header-anchor">#</a> <strong>不定参数</strong></h4> <p>不定参数用来表示不确定参数个数，形如，...变量名，由...加上一个具名参数标识符组成。具名参数只能放在参数组的<strong>最后</strong>，并且有且只有一个不定参数。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>function f(...values){
    console.log(values.length);
}
f(1,2);      //2
f(1,2,3,4);  //4
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="箭头函数"><a href="#箭头函数" class="header-anchor">#</a> <strong>箭头函数</strong></h4> <p>箭头函数提供了函数更简洁的写法，同时函数内的this指向也会有一定改变</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var f = v =&gt; v;
//等价于
var f = function(v){
 return v;
}

//当无参数或者多个参数时
var f = (a,b) =&gt; a+b;
f(6,2);  //8

//多行语句需要用{}把函数体包起来
var f = (a,b) =&gt; {
 let result = a+b;
 return result;
}
f(6,2);  // 8

//当箭头函数要返回对象的时候，为了区分于代码块，要用 () 将对象包裹起来
// 报错
var f = (id,name) =&gt; {id: id, name: name};
f(6,2);  // SyntaxError: Unexpected token :
 
// 不报错
var f = (id,name) =&gt; ({id: id, name: name});
f(6,2);  // {id: 6, name: 2}

//注意点：没有 this、super、arguments 和 new.target 绑定。
var func = () =&gt; {
  // 箭头函数里面没有 this 对象，
  // 此时的 this 是外层的 this 对象，即 Window 
  console.log(this)
}
func(55)  // Window 
var func = () =&gt; {    
  console.log(arguments)
}
func(55);  // ReferenceError: arguments is not defined

//箭头函数体中的 this 对象，是定义函数时的对象，而不是使用函数时的对象。
function fn(){
  setTimeout(()=&gt;{
    // 定义时，this 绑定的是 fn 中的 this 对象
    console.log(this.a);
  },0)
}
var a = 20;
// fn 的 this 对象为 {a: 19}
fn.call({a: 18});  // 18
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><h2 id="_4-reflect与proxy"><a href="#_4-reflect与proxy" class="header-anchor">#</a> <strong>4.Reflect与Proxy</strong></h2> <p>Proxy 与 Reflect 是 ES6 为了操作对象引入的 API 。</p> <p>Proxy 可以对目标对象的读取、函数调用等操作进行拦截，然后进行操作处理。它不直接操作对象，而是像代理模式，通过对象的代理对象进行操作，在进行这些操作时，可以添加一些需要的额外操作。</p> <p>Reflect 可以用于获取目标对象的行为，它与 Object 类似，但是更易读，为操作对象提供了一种更优雅的方式。它的方法与 Proxy 是对应的。</p> <p>vue3.0中，双向绑定就是使用了Proxy语法代替了原来的defineProperty，掌握Proxy对我们使用vue会有很大的帮助</p> <h3 id="proxy"><a href="#proxy" class="header-anchor">#</a> <strong>Proxy</strong></h3> <p>一个 Proxy 对象由两个部分组成： target 、 handler 。在通过 Proxy 构造函数生成实例对象时，需要提供这两个参数。 target 即目标对象， handler 是一个对象，声明了代理 target 的指定行为。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>let target = {
    name: 'Tom',
    age: 24
}
let handler = {
    get: function(target, key) {
        //参数target是访问的对象，key是访问的对象属性名
        //以下是访问对象的值时运行的代码
        console.log('getting '+key);
        return target[key]; // 不是target.key
    },
    set: function(target, key, value) {
        //参数target是访问的对象，key是访问的对象属性名，value是新设置的值
        //以下是设置对象的值时运行的代码
        console.log('setting '+key);
        target[key] = value;
    }
}
let proxy = new Proxy(target, handler)
proxy.name     // 实际执行 handler.get
proxy.age = 25 // 实际执行 handler.set
// getting name
// setting age
// 25
 
// target 可以为空对象
let targetEpt = {}
let proxyEpt = new Proxy(targetEpt, handler)
// 调用 get 方法，此时目标对象为空，没有 name 属性
proxyEpt.name // getting name
// 调用 set 方法，向目标对象中添加了 name 属性
proxyEpt.name = 'Tom'
// setting name
// &quot;Tom&quot;
// 再次调用 get ，此时已经存在 name 属性
proxyEpt.name
// getting name
// &quot;Tom&quot;
 
// handler 对象也可以为空，相当于不设置拦截操作，直接访问目标对象
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h4 id="用proxy写一个拦截器"><a href="#用proxy写一个拦截器" class="header-anchor">#</a> <strong>用Proxy写一个拦截器</strong></h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>let validator = {
    set: function(obj, prop, value) {
        if (prop === 'age') {
            if (!Number.isInteger(value)) {//不为数字报错
                throw new TypeError('The age is not an integer');
            }
            if (value &gt; 200) {//大于200报错
                throw new RangeError('The age seems invalid');
            }
        }
        // 对于满足条件的 age 属性以及其他属性，直接保存
        obj[prop] = value;
    }
};
let proxy= new Proxy({}, validator)
proxy.age = 100;
proxy.age           // 100
proxy.age = 'oppps' // 报错
proxy.age = 300     // 报错
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>注意，严格模式下，set代理如果没有返回true，就会报错。</p> <h3 id="reflect"><a href="#reflect" class="header-anchor">#</a> <strong>Reflect</strong></h3> <p>ES6 中将 Object 的一些明显属于语言内部的方法移植到了 Reflect 对象上（当前某些方法会同时存在于 Object 和 Reflect 对象上），未来的新方法会只部署在 Reflect 对象上。
Reflect 对象对某些方法的返回结果进行了修改，使其更合理。
Reflect 对象使用函数的方式实现了 Object 的命令式操作。</p> <p>查找并返回 target 对象的 name 属性。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>let exam = {
    name: &quot;Tom&quot;,
    age: 24,
    get info(){
        return this.name + this.age;
    }
}
Reflect.get(exam, 'name'); // &quot;Tom&quot;
 
// 当 target 对象中存在 name 属性的 getter 方法， getter 方法的 this 会绑定 // receiver
let receiver = {
    name: &quot;Jerry&quot;,
    age: 20
}
Reflect.get(exam, 'info', receiver); // Jerry20
 
// 当 name 为不存在于 target 对象的属性时，返回 undefined
Reflect.get(exam, 'birth'); // undefined
 
// 当 target 不是对象时，会报错
Reflect.get(1, 'name'); // TypeError
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="组合使用"><a href="#组合使用" class="header-anchor">#</a> <strong>组合使用</strong></h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>let exam = {
    name: &quot;Tom&quot;,
    age: 24
}
let handler = {
    get: function(target, key){
        console.log(&quot;getting &quot;+key);
        return Reflect.get(target,key);
    },
    set: function(target, key, value){
        console.log(&quot;setting &quot;+key+&quot; to &quot;+value)
        Reflect.set(target, key, value);
    }
}
let proxy = new Proxy(exam, handler)
proxy.name = &quot;Jerry&quot;
proxy.name
// setting name to Jerry
// getting name
// &quot;Jerry&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p><a href="https://www.runoob.com/w3cnote/es6-reflect-proxy.html" target="_blank" rel="noopener noreferrer">更多详情<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_5-promise"><a href="#_5-promise" class="header-anchor">#</a> <strong>5.Promise</strong></h2> <p>Promise是异步编程的一种解决方案。从语法上说，Promise 是一个对象，从它可以获取异步操作的消息。</p> <h3 id="promise-状态"><a href="#promise-状态" class="header-anchor">#</a> <strong>Promise 状态</strong></h3> <p>Promise 异步操作有三种状态：pending（进行中）、fulfilled（已成功）和 rejected（已失败）。除了异步操作的结果，任何其他操作都无法改变这个状态。
Promise 对象只有：从 pending 变为 fulfilled 和从 pending 变为 rejected 的状态改变。只要处于 fulfilled 和 rejected ，状态就不会再变了即 resolved（已定型）。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>const p1 = new Promise(function(resolve,reject){
    resolve('success1');
    resolve('success2');
}); 
const p2 = new Promise(function(resolve,reject){  
    resolve('success3'); 
    reject('reject');
});
p1.then(function(value){  
    console.log(value); // success1
});
p2.then(function(value){ 
    console.log(value); // success3
});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>注意：
无法取消 Promise ，一旦新建它就会立即执行，无法中途取消。如果不设置回调函数，Promise 内部抛出的错误，不会反应到外部。当处于pending状态时，无法得知目前进展到哪一个阶段（刚刚开始还是即将完成）。</p> <h3 id="then-方法"><a href="#then-方法" class="header-anchor">#</a> <strong>then 方法</strong></h3> <p>then 方法接收两个函数作为参数，第一个参数是 Promise 执行成功时的回调，第二个参数是 Promise 执行失败时的回调，两个函数只会有一个被调用。
在 JavaScript 事件队列的当前运行完成之前，回调函数永远不会被调用。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>const p = new Promise(function(resolve,reject){
  resolve('success');
});

p.then(function(value){
  console.log(value);
});

console.log('first');
// first
// success
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>通过 .then 形式添加的回调函数，不论什么时候，都会被调用。
可以添加多个回调函数，它们会按照插入顺序并且独立运行。适合我们在业务中先请求一个接口完成后再请求另一个接口。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>const p = new Promise(function(resolve,reject){
  resolve(1);
}).then(function(value){ // 第一个then // 1
  console.log(value);
  return value * 2;
}).then(function(value){ // 第二个then // 2
  console.log(value);
}).then(function(value){ // 第三个then // undefined
  console.log(value);
  return Promise.resolve('resolve'); 
}).then(function(value){ // 第四个then // resolve
  console.log(value);
  return Promise.reject('reject'); 
}).then(function(value){ // 第五个then //reject:reject
  console.log('resolve:' + value);
}, function(err) {
  console.log('reject:' + err);
});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>then 方法将返回一个 resolved 或 rejected 状态的 Promise 对象用于链式调用，且 Promise 对象的值就是这个返回值。</p> <h3 id="promise封装axios"><a href="#promise封装axios" class="header-anchor">#</a> <strong>Promise封装axios</strong></h3> <div class="language- line-numbers-mode"><pre class="language-text"><code> checkLogin: () =&gt; {
// 返回一个promise对象
    return new Promise((resolve, reject) =&gt; {
      axios({
            url: url
            method: 'post',
            data: {
            }
          })
            .then((res) =&gt; {
              resolve(res.data);
              // console.log(res);
            })
            .catch(function (error) {
              reject(error);
              // console.log(error);
            });
    });
  }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>调用</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>this.checkLogin().then(res =&gt; {
        console.log(res);
        // 执行成功的回调函数
        },
        error =&gt; { 
        console.log(error); 
        // 执行失败的回调函数
        });
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="promise-prototype-catch方法-捕捉错误"><a href="#promise-prototype-catch方法-捕捉错误" class="header-anchor">#</a> <strong>Promise.prototype.catch方法：捕捉错误</strong></h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>getJSON(&quot;/posts.json&quot;).then(function(posts) {
  // some code
}).catch(function(error) {
  // 处理前一个回调函数运行时发生的错误
  console.log('发生错误！', error);
});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="promise-all方法-promise-race方法"><a href="#promise-all方法-promise-race方法" class="header-anchor">#</a> <strong>Promise.all方法，Promise.race方法</strong></h3> <p>Promise.all 方法用于将多个 Promise 实例，包装成一个新的 Promise 实例。例如</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var p = Promise.all([p1,p2,p3]);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Promise.all 方法接受一个数组作为参数，p1、p2、p3 都是 Promise 对象的实例。（Promise.all 方法的参数不一定是数组，但是必须具有 iterator 接口，且返回的每个成员都是 Promise 实例。）
p 的状态由 p1、p2、p3 决定，分成两种情况。</p> <ul><li>只有p1、p2、p3的状态都变成fulfilled，p的状态才会变成fulfilled，此时p1、p2、p3的返回值组成一个数组，传递给p的回调函数。</li> <li>只要p1、p2、p3之中有一个被rejected，p的状态就变成rejected，此时第一个被reject的实例的返回值，会传递给p的回调函数。</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>// 生成一个Promise对象的数组
var promises = [2, 3, 5, 7, 11, 13].map(function(id){
  return getJSON(&quot;/post/&quot; + id + &quot;.json&quot;);
});
 
Promise.all(promises).then(function(posts) {
  // ...  
}).catch(function(reason){
  // ...
});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>Promise.race 方法同样是将多个 Promise 实例，包装成一个新的 Promise 实例。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var p = Promise.race([p1,p2,p3]);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>只要p1、p2、p3之中有一个实例率先改变状态，p的状态就跟着改变。那个率先改变的Promise实例的返回值，就传递给p的返回值。
如果Promise.all方法和Promise.race方法的参数，不是Promise实例，就会先调用下面讲到的Promise.resolve方法，将参数转为Promise实例，再进一步处理。</p> <h2 id="_6-generator函数和async函数"><a href="#_6-generator函数和async函数" class="header-anchor">#</a> <strong>6.Generator函数和async函数</strong></h2> <p>Generator可以通过 yield关键字，把函数的执行流挂起，为改变执行流程提供了可能，从而为异步编程提供解决方案。</p> <h3 id="generator-函数组成"><a href="#generator-函数组成" class="header-anchor">#</a> <strong>Generator 函数组成</strong></h3> <p>Generator 有两个区分于普通函数的部分：是在 function 后面，函数名之前有个 * ；函数内部有 yield 表达式。</p> <p>其中 * 用来表示函数为 Generator 函数，yield 用来定义函数内部的状态。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>function* func(){
 console.log(&quot;one&quot;);
 yield '1';
 console.log(&quot;two&quot;);
 yield '2'; 
 console.log(&quot;three&quot;);
 return '3';
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="执行机制"><a href="#执行机制" class="header-anchor">#</a> <strong>执行机制</strong></h3> <p>调用 Generator 函数和调用普通函数一样，在函数名后面加上()即可，但是 Generator 函数不会像普通函数一样立即执行，而是返回一个指向内部状态对象的指针，所以要调用遍历器对象Iterator 的 next 方法，指针就会从函数头部或者上一次停下来的地方开始执行，直到遇到yield。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>func.next();
// one
// {value: &quot;1&quot;, done: false}
 
func.next();
// two
// {value: &quot;2&quot;, done: false}
 
func.next();
// three
// {value: &quot;3&quot;, done: true}
 
func.next();
// {value: undefined, done: true}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>第一次调用 next 方法时，从 Generator 函数的头部开始执行，先是打印了 one ,执行到 yield 就停下来，并将yield 后边表达式的值 '1'，作为返回对象的 value 属性值，此时函数还没有执行完， 返回对象的 done 属性值是 false。
第二次调用 next 方法时，同上步 。
第三次调用 next 方法时，先是打印了 three ，然后执行了函数的返回操作，并将 return 后面的表达式的值，作为返回对象的 value 属性值，此时函数已经结束，多以 done 属性值为true 。
第四次调用 next 方法时， 此时函数已经执行完了，所以返回 value 属性值是 undefined ，done 属性值是 true 。如果执行第三步时，没有 return 语句的话，就直接返回 {value: undefined, done: true}。</p> <p>注意点：当 next 传入参数的时候，该参数会作为上一步yield的返回值</p> <h4 id="return方法"><a href="#return方法" class="header-anchor">#</a> <strong>return方法</strong></h4> <p>return 方法返回给定值，并结束遍历Generator函数。return方法提供参数时，返回该参数；不提供参数时，返回 undefined</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>function* foo(){
    yield 1;
    yield 2;
    yield 3;
}
var f = foo();
f.next();
// {value: 1, done: false}
f.return(&quot;foo&quot;);
// {value: &quot;foo&quot;, done: true}
f.next();
// {value: undefined, done: true}
throw 方法
throw 方法可以再 Generator 函数体外面抛出异常，再函数体内部捕获。
var g = function* () {
  try {
    yield;
  } catch (e) {
    console.log('catch inner', e);
  }
};
 
var i = g();
i.next();
 
try {
  i.throw('a');
  i.throw('b');
} catch (e) {
  console.log('catch outside', e);
}
// catch inner a
// catch outside b
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>遍历器对象抛出了两个错误，第一个被 Generator 函数内部捕获，第二个因为函数体内部的catch 函数已经执行过了，不会再捕获这个错误，所以这个错误就抛出 Generator 函数体，被函数体外的 catch 捕获。</p> <h4 id="使用场景"><a href="#使用场景" class="header-anchor">#</a> <strong>使用场景</strong></h4> <p>为不具备 Iterator 接口的对象提供遍历方法。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>function* objectEntries(obj) {
    const propKeys = Reflect.ownKeys(obj);
    for (const propKey of propKeys) {
        yield [propKey, obj[propKey]];
    }
}
 
const jane = { first: 'Jane', last: 'Doe' };
for (const [key,value] of objectEntries(jane)) {
    console.log(`${key}: ${value}`);
}
// first: Jane
// last: Doe
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>Reflect.ownKeys() 返回对象所有的属性，不管属性是否可枚举，包括 Symbol。jane 原生是不具备 Iterator 接口无法通过 for... of遍历。这边用了 Generator 函数加上了 Iterator 接口，所以就可以遍历 jane 对象了。</p> <h3 id="async函数"><a href="#async函数" class="header-anchor">#</a> <strong>async函数</strong></h3> <p>async 是 ES7 才有的与异步操作有关的关键字，和 Promise ， Generator 有很大关联的</p> <h4 id="返回值"><a href="#返回值" class="header-anchor">#</a> <strong>返回值</strong></h4> <p>async 函数返回一个 Promise 对象，可以使用 then 方法添加回调函数。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>async function helloAsync(){
    return &quot;helloAsync&quot;;
  }
  
console.log(helloAsync())  // Promise {&lt;resolved&gt;: &quot;helloAsync&quot;}
 
helloAsync().then(v=&gt;{
   console.log(v);         // helloAsync
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>async 函数中可能会有 await 表达式，async 函数执行时，如果遇到 await 就会先暂停执行 ，等到触发的异步操作完成后，恢复 async 函数的执行并返回解析值。
await 关键字仅在 async function 中有效。如果在async function函数体外使用await，你只会得到一个语法错误。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>function testAwait(){
   return new Promise((resolve) =&gt; {
     //一个请求
     console.log(response)
   });
}
 
async function helloAsync(){
   await testAwait();
   console.log(&quot;end&quot;);
 }
helloAsync();
// response
// end
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>应用场景：先请求数据，再根据请求到的数据完成下一个请求。</p> <p>正常情况下，await 命令后面是一个 Promise 对象，它也可以跟其他值，如字符串，布尔值，数值以及普通函数。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>function testAwait(){
   console.log(&quot;testAwait&quot;);
}
async function helloAsync(){
   await testAwait();
   console.log(&quot;helloAsync&quot;);
}
helloAsync();
// testAwait
// helloAsync
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>await针对所跟不同表达式的处理方式：
Promise 对象：await 会暂停执行，等待 Promise 对象 resolve，然后恢复 async 函数的执行并返回解析值。
非 Promise 对象：直接返回对应的值。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/28/2021, 11:08:26 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/posts/footer位置的自动适配.html" class="prev">
        footer位置的自动适配
      </a></span> <span class="next"><a href="/posts/121501.html">
        Vue组件的通信总结
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.0e804dd0.js" defer></script><script src="/assets/js/2.88d3d6de.js" defer></script><script src="/assets/js/10.2a262f59.js" defer></script>
  </body>
</html>
